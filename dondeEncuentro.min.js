(function(){var b={idMap:"map",defaultLocation:{latitude:-34.8937720817105,longitude:-56.1659574508667}};var a=function a(c){_.extend(this,b,c);return this;
};a.prototype.createMap=function(c){return new google.maps.Map(c,{mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:false,mapTypeControl:false,zoom:15});
};a.prototype.createMarker=function(c){c=c||{};return new google.maps.Marker({icon:c.icon,map:this.map,position:new google.maps.LatLng(c.latitude,c.longitude)});
};a.prototype.setInitialPosition=function(d){var c=new google.maps.LatLng(d.latitude,d.longitude);this.initialPosition=c;this.map.setCenter(c);this.userLocationMarker.setPosition(c);
return this;};a.prototype.handleInitialLocationError=function(){this.setInitialPosition(this.defaultLocation);this.errorMessage&&alert(this.errorMessage);
console.log("Initial location not found.");return this;};a.prototype.panToPosition=function(c){if(!(c instanceof google.maps.LatLng)){c=new google.maps.LatLng(c.latitude,c.longitude);
}this.map.panTo(c);return this;};a.prototype.panToInitialPosition=function(){this.panToPosition(this.initialPosition);return this;};a.prototype.addMarker=function(c){if(!(c.type in this.groups)){this.groups[c.type]={};
}if(!this.groups[c.type].markers){this.groups[c.type].markers=[];}c.icon=this.groups[c.type].icon;this.groups[c.type].markers.push(this.createMarker(c));
return this;};a.prototype.getUserPosition=function(){var c=this;navigator.geolocation.getCurrentPosition(function(d){c.setInitialPosition(d.coords);},function(){c.handleInitialLocationError(arguments);
},{enableHighAccuracy:true,timeout:8000});return this;};a.prototype.addMarkers=function(){var c=this;if(!this.markers){console.log("No markers found.");
}_.each(this.markers,function(d){c.addMarker(d);});return this;};a.prototype.createIcons=function(){var c=this;_.each(this.icons,function(e,d){if(!(d in c.groups)){c.groups[d]={};
}c.groups[d].icon=new google.maps.MarkerImage(c.icons[d],null,null,null,new google.maps.Size(37,34));});return this;};a.prototype.init=function(){if(document.getElementById(this.idMap)){this.map=this.createMap(document.getElementById(this.idMap));
this.userLocationMarker=this.createMarker();this.userLocationMarker.setClickable(false);this.groups={};if("geolocation" in navigator){this.getUserPosition();
}else{this.handleInitialLocationError();}this.createIcons();this.addMarkers();}else{console.error("Map placeholder not found.");}return this;};window.DondeEncuentro=a;
}());